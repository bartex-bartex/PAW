<div>
  <label for="categoryFilter">Filter Categories (comma-separated): </label>
  <input id="categoryFilter" type="text" [(ngModel)]="filterText" (ngModelChange)="onFilterChange()" placeholder="Type categories to filter">
</div>

<div class="container">
  <div class="menu-section">
    <h1>Sekcja menu</h1>
    <div *ngFor="let category of filteredCategories()">
      <div class="category-item">
        <label>
          <input type="checkbox" [checked]="isCategorySelected(category)"
            (change)="toggleCategorySelection(category)">
          {{ category }}
        </label>
      
        <button (click)="toggleCategoryExpansion(category)">
          {{ isCategoryExpanded(category) ? 'Collapse' : 'Expand' }}
        </button>
      </div>

      <ul *ngIf="isCategoryExpanded(category)">
        <li *ngFor="let product of products(category)">
          <label>
            <input type="checkbox" [checked]="isProductSelected(category, product)"
              (change)="toggleProductSelection(category, product)">
            {{ product }}
          </label>
        </li>
      </ul>
    </div>
  </div>

  <div class="main-section">
    <h1>Sekcja Główna</h1>
    <ul>
      <li *ngFor="let product of getAllSelectedProducts()">
        {{ product }}
      </li>
    </ul>
  </div>
</div>