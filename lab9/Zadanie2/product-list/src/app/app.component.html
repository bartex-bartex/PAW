<div *ngFor="let category of categories()">
  <label>
    <input 
      type="checkbox" 
      [checked]="isCategorySelected(category)" 
      [disabled]="isCategoryExpanded(category)" 
      (change)="toggleCategorySelection(category)">
    {{ category }}
  </label>

  <button (click)="toggleCategoryExpansion(category)">
    {{ isCategoryExpanded(category) ? 'Collapse' : 'Expand' }}
  </button>

  <ul *ngIf="isCategoryExpanded(category)">
    <li *ngFor="let product of products(category)">
      <label>
        <input 
          type="checkbox" 
          [checked]="isProductSelected(category, product)" 
          (change)="toggleProductSelection(category, product)">
        {{ product }}
      </label>
    </li>
  </ul>
</div>
